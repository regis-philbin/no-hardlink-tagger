version: '3.8'

services:
  no-hardlink-tagger:
    build: .
    container_name: no-hardlink-tagger
    restart: unless-stopped
    environment:
      - PUID=0
      - PGID=0
      - TZ=America/New_York
      - QBITTORRENT_URL=${QBITTORRENT_URL}
      - QBITTORRENT_USER=${QBITTORRENT_USER}
      - QBITTORRENT_PASS=${QBITTORRENT_PASS}
      - ORPHAN_TAG=NoMediaLink
      - DOWNLOADS_DIR=/media/downloads
      - MEDIA_DIRS=/media/movies,/media/tv
      - DEBUG_INTERVAL=10   # Time in seconds between cleanup cycles
      - BATCH_SIZE=100
      - MAX_TORRENTS=100
      - MIN_SIZE_MB=50
      - EXT_WHITELIST=.mkv,.mp4,.m4v,.mov,.avi
    volumes:
      # Mount media directories
      - /media:/media
    # Optional: use host networking if container cannot reach qBittorrent
    # network_mode: "host"
